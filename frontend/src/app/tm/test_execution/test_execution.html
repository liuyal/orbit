<app-navbar [showBackButton]="true" [backButtonText]="'Back'" [backButtonAction]="goBack.bind(this)"></app-navbar>

<div class="content">
  @if (showSpinner) {
  <div class="loading-container">
    <div class="spinner"></div>
  </div>
  } @else if (!loading) {
  <div class="tabs-container">
    <div class="page-header">
      <h1>Execution Details</h1>
    </div>

    @if (apiError) {
    <div class="alert-error">{{ apiError }}</div>
    }

    @if (execution) {
    <div class="form-container">
      <div class="execution-header">
        <div class="execution-key-badge">
          <span class="label">Execution Key</span>
          <span class="value">{{ execution.execution_key || executionKey }}</span>
        </div>
        <div class="status-badge" [attr.data-status]="execution.result || 'NOT_EXECUTED'">
          {{ execution.result || 'NOT_EXECUTED' }}
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Test Case</label>
          <div class="read-only-value">{{ execution.test_case_key || '-' }}</div>
        </div>
        <div class="form-group">
          <label>Test Cycle</label>
          <div class="read-only-value">{{ execution.test_cycle_key || '-' }}</div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Started At</label>
          <div class="read-only-value">{{ execution.started_at || '-' }}</div>
        </div>
        <div class="form-group">
          <label>Finished At</label>
          <div class="read-only-value">{{ execution.finished_at || '-' }}</div>
        </div>
      </div>

      <div class="form-group">
        <label>Custom Fields</label>
        <div class="comment-box">{{ execution.custom_fields || 'No custom fields' }}</div>
      </div>

      <div class="form-group">
        <label>Comments</label>
        <div class="comment-box">{{ execution.comment || execution.comments || 'No comments' }}</div>
      </div>
    </div>
    }
  </div>
  }
</div>
